<!doctype html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline' data:; connect-src 'self' https://ljbsdchuxndewovolhft.supabase.co https://*.supabase.co; img-src 'self' data:; script-src 'self' 'unsafe-inline' 'unsafe-eval'; style-src 'self' 'unsafe-inline';">
    <title>ICT-AIMS Reset Password</title>
    <style>
      body { 
        font-family: Arial, sans-serif; 
        display: flex; 
        justify-content: center; 
        align-items: center; 
        height: 100vh; 
        margin: 0; 
        background: radial-gradient(circle at top, #001b00 0%, #000 55%, #000 100%);
        color: #c8ffce;
      }
      
      .container {
        background: rgba(12, 12, 12, 0.95); 
        padding: 40px; 
        border-radius: 12px; 
        box-shadow: 0 16px 40px rgba(0, 255, 102, 0.15); 
        width: 100%;
        max-width: 420px;
        border: 1px solid rgba(0, 255, 102, 0.45);
        box-sizing: border-box;
      }

      h2 { 
        color: #3cff8c; 
        margin-bottom: 10px; 
        margin-top: 0; 
        text-align: center;
      }

      .subtitle {
        text-align: center;
        color: #a5ffbb;
        font-size: 14px;
        margin-bottom: 30px;
      }

      .warning {
        background: linear-gradient(135deg, rgba(60, 255, 140, 0.15) 0%, rgba(0, 255, 102, 0.05) 100%);
        border-left: 4px solid #3cff8c;
        padding: 15px;
        margin-bottom: 20px;
        border-radius: 8px;
        font-size: 14px;
        color: #c8ffce;
      }

      .form-group {
        margin-bottom: 20px;
      }

      label {
        display: block;
        color: #a5ffbb;
        font-size: 14px;
        margin-bottom: 6px;
        font-weight: 600;
      }

      input { 
        width: 100%; 
        padding: 12px; 
        border: 1px solid rgba(0, 255, 102, 0.45); 
        border-radius: 6px; 
        box-sizing: border-box;
        transition: border-color 0.3s, box-shadow 0.3s;
        font-size: 14px;
        background: rgba(0, 0, 0, 0.65);
        color: #c8ffce;
      }

      input::placeholder {
        color: rgba(200, 255, 206, 0.55);
      }

      input:focus { 
        outline: none; 
        border-color: #3cff8c; 
        box-shadow: 0 0 0 2px rgba(60, 255, 140, 0.2);
      }

      .password-field {
        position: relative;
        display: flex;
        align-items: center;
      }

      .password-field input {
        padding-right: 44px;
      }

      .password-toggle {
        position: absolute;
        right: 10px;
        background: transparent;
        border: none;
        width: auto;
        height: auto;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        color: rgba(200, 255, 206, 0.75);
        cursor: pointer;
        padding: 6px;
        border-radius: 50%;
        transition: color 0.2s ease, background 0.2s ease;
      }

      .password-toggle:hover,
      .password-toggle:focus-visible {
        outline: none;
        color: #3cff8c;
        background: rgba(60, 255, 140, 0.12);
      }

      .password-toggle svg {
        width: 18px;
        height: 18px;
        fill: currentColor;
      }

      .password-toggle .icon-eye-off {
        display: none;
      }

      .password-toggle.is-visible .icon-eye {
        display: none;
      }

      .password-toggle.is-visible .icon-eye-off {
        display: block;
      }

      .password-requirements {
        font-size: 12px;
        color: #a5ffbb;
        margin-top: 6px;
      }

      .password-requirements ul {
        margin: 6px 0;
        padding-left: 20px;
      }

      .password-requirements li {
        margin: 4px 0;
      }

      .password-requirements li.valid {
        color: #3cff8c;
      }

      .password-requirements li.invalid {
        color: #ff6f6f;
      }

      button { 
        width: 100%; 
        padding: 12px; 
        background: linear-gradient(135deg, #00b94a 0%, #00963a 100%); 
        color: #001400; 
        border: none; 
        border-radius: 6px; 
        cursor: pointer; 
        font-weight: bold;
        transition: transform 0.2s, box-shadow 0.2s, background 0.2s;
        font-size: 14px;
        margin-top: 10px;
      }

      button:hover { 
        transform: translateY(-2px);
        box-shadow: 0 8px 20px rgba(60, 255, 140, 0.3);
        background: linear-gradient(135deg, #00d05d 0%, #00a542 100%);
      }

      button:disabled {
        opacity: 0.6;
        cursor: not-allowed;
        transform: none;
        box-shadow: none;
      }

      .error { 
        color: #ff6f6f; 
        font-size: 14px; 
        margin-top: 10px; 
        text-align: center;
      }

      .success {
        color: #3cff8c;
        font-size: 14px;
        margin-top: 10px;
        text-align: center;
      }
    </style>
  </head>
  <script type="module" src="./change-password.js"></script>
  <body>
    <div class="container">
      <h2>Reset Your Password</h2>
      <p class="subtitle">Enter a new password to regain access to your account.</p>

      <div class="warning">
        <strong>ℹ️ Password Reset</strong><br>
        This link was sent to your email. Create a new secure password to continue.
      </div>

      <form id="change-password-form">
        <div class="form-group">
          <label for="new-password">New Password</label>
          <div class="password-field">
            <input type="password" id="new-password" required />
            <button
              type="button"
              class="password-toggle"
              data-password-toggle
              data-target="new-password"
              aria-label="Show password"
              aria-pressed="false"
            >
              <svg class="icon-eye" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
                <path d="M12 5c-4.5 0-8.4 2.8-10 7 1.6 4.2 5.5 7 10 7s8.4-2.8 10-7c-1.6-4.2-5.5-7-10-7Zm0 12a5 5 0 1 1 0-10 5 5 0 0 1 0 10Zm0-2a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" />
              </svg>
              <svg class="icon-eye-off" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
                <path d="M3.3 2 2 3.3l3 3C3.1 7.5 1.6 9 1 12c1.6 4.2 5.5 7 10 7 2.1 0 4.1-.6 5.8-1.7l3 3 1.3-1.3ZM12 17c-3.4 0-6.4-2.1-7.9-5 .4-1 1-1.8 1.7-2.6l1.5 1.5A3.9 3.9 0 0 0 7 12a5 5 0 0 0 5 5c.6 0 1.1-.1 1.7-.3l1.5 1.5c-.9.5-1.9.8-3.2.8Zm0-10c1.3 0 2.5.3 3.5.9l-1.6 1.6A3 3 0 0 0 12 8a3 3 0 0 0-3 3c0 .4.1.8.2 1.2L7 13.4a5 5 0 0 1-.3-1.4 5 5 0 0 1 5-5Zm10 5c-.3.9-.7 1.7-1.2 2.4l-1.5-1.5c.3-.3.5-.7.7-1-.9-1.6-2.3-3-4.2-3.8l1.5-1.5c1.9 1 3.4 2.5 4.7 4.4Z" />
              </svg>
            </button>
          </div>
          <div class="password-requirements">
            <strong>Password must contain:</strong>
            <ul>
              <li id="req-length" class="invalid">At least 8 characters</li>
              <li id="req-uppercase" class="invalid">One uppercase letter</li>
              <li id="req-lowercase" class="invalid">One lowercase letter</li>
              <li id="req-number" class="invalid">One number</li>
              <li id="req-special" class="invalid">One special character (!@#$%^&* etc.)</li>
            </ul>
          </div>
        </div>
        <div class="form-group">
          <label for="confirm-password">Confirm New Password</label>
          <div class="password-field">
            <input type="password" id="confirm-password" required />
            <button
              type="button"
              class="password-toggle"
              data-password-toggle
              data-target="confirm-password"
              aria-label="Show password"
              aria-pressed="false"
            >
              <svg class="icon-eye" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
                <path d="M12 5c-4.5 0-8.4 2.8-10 7 1.6 4.2 5.5 7 10 7s8.4-2.8 10-7c-1.6-4.2-5.5-7-10-7Zm0 12a5 5 0 1 1 0-10 5 5 0 0 1 0 10Zm0-2a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" />
              </svg>
              <svg class="icon-eye-off" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
                <path d="M3.3 2 2 3.3l3 3C3.1 7.5 1.6 9 1 12c1.6 4.2 5.5 7 10 7 2.1 0 4.1-.6 5.8-1.7l3 3 1.3-1.3ZM12 17c-3.4 0-6.4-2.1-7.9-5 .4-1 1-1.8 1.7-2.6l1.5 1.5A3.9 3.9 0 0 0 7 12a5 5 0 0 0 5 5c.6 0 1.1-.1 1.7-.3l1.5 1.5c-.9.5-1.9.8-3.2.8Zm0-10c1.3 0 2.5.3 3.5.9l-1.6 1.6A3 3 0 0 0 12 8a3 3 0 0 0-3 3c0 .4.1.8.2 1.2L7 13.4a5 5 0 0 1-.3-1.4 5 5 0 0 1 5-5Zm10 5c-.3.9-.7 1.7-1.2 2.4l-1.5-1.5c.3-.3.5-.7.7-1-.9-1.6-2.3-3-4.2-3.8l1.5-1.5c1.9 1 3.4 2.5 4.7 4.4Z" />
              </svg>
            </button>
          </div>
        </div>

        <button type="submit" id="submit-btn">Change Password</button>
        <p id="error-message" class="error"></p>
        <p id="success-message" class="success"></p>
      </form>
    </div>
  </body>
</html>
